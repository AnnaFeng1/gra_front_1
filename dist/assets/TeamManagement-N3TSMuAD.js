import{u as le,r as d,a as A,j as oe,o as ne,c as S,d as a,b as t,w as l,E as b,f as r,g as h,h as u,t as n,x as ie,l as E,m as P,i as re,z as de,y as ue}from"./index-nCsIEKc5.js";import{T as me}from"./TheHeader-DUIFwaDE.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pe={class:"team-management-container"},ve={class:"main-content"},_e={class:"page-header"},fe={class:"page-actions"},ge={class:"stats-wrapper"},be={class:"stat-box"},he={class:"stat-info"},ye={class:"stat-value"},Ce={class:"stat-box"},we={class:"stat-info"},Te={class:"stat-value"},ke={class:"stat-box"},xe={class:"stat-info"},Ve={class:"stat-value"},Me={class:"card-header"},Se={class:"table-actions"},De={key:0,class:"loading-container"},ze={class:"commission-text"},je={class:"pagination-container"},$e={class:"dialog-footer"},Ue={key:0,class:"member-detail"},Be={class:"member-header"},Le={class:"member-avatar"},Fe={class:"member-info"},Ne={class:"member-name"},Re={class:"member-id"},Ae={class:"member-status"},Ee={class:"detail-section"},Pe={class:"detail-item"},Ie={class:"detail-value"},qe={class:"detail-item"},He={class:"detail-value"},Qe={class:"detail-item"},Ye={class:"detail-value"},Ge={class:"detail-section"},Je={class:"performance-stats"},Ke={class:"performance-item"},Oe={class:"performance-value"},We={class:"performance-item"},Xe={class:"performance-value"},Ze={class:"performance-item"},et={class:"performance-value"},tt={__name:"TeamManagement",setup(st){re(),le();const y=d(!0),f=d(!1),T=d(!1),k=d(1),D=d(10),C=d(""),g=d(!1),x=d(!1),v=A({memberCount:0,conversionCount:0,totalCommission:0}),z=d(null),m=A({username:"",email:"",phone:""}),I={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}]},i=d(null),c=d([{id:1001,username:"张三",joinTime:"2023-01-15T14:30:00",conversionCount:42,commission:3680.5,status:"active",phone:"13812345678",email:"zhangsan@example.com",rank:1},{id:1002,username:"李四",joinTime:"2023-02-18T09:15:00",conversionCount:36,commission:2950.75,status:"active",phone:"13987654321",email:"lisi@example.com",rank:2},{id:1003,username:"王五",joinTime:"2023-03-05T16:45:00",conversionCount:29,commission:2410.2,status:"active",phone:"13765432198",email:"wangwu@example.com",rank:3},{id:1004,username:"赵六",joinTime:"2023-03-22T11:20:00",conversionCount:18,commission:1520.3,status:"pending",phone:"13612345678",email:"zhaoliu@example.com",rank:4},{id:1005,username:"钱七",joinTime:"2023-04-10T10:00:00",conversionCount:8,commission:680.8,status:"inactive",phone:"13512345678",email:null,rank:5}]),q=oe(()=>{if(!C.value)return c.value;const s=C.value.toLowerCase();return c.value.filter(e=>e.username.toLowerCase().includes(s)||e.id.toString().includes(s)||e.email&&e.email.toLowerCase().includes(s)||e.phone&&e.phone.includes(s))}),V=s=>s==null?"0.00":Number(s).toFixed(2),j=s=>{if(!s)return"暂无数据";const e=new Date(s);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},$=s=>({active:"success",pending:"warning",inactive:"info"})[s]||"info",U=s=>({active:"活跃",pending:"待审核",inactive:"不活跃"})[s]||"未知",B=async()=>{y.value=!0,f.value=!0;try{await new Promise(s=>setTimeout(s,1e3)),H()}catch(s){console.error("获取团队成员失败:",s),b.error("获取团队成员失败，请稍后重试")}finally{y.value=!1,f.value=!1}},H=()=>{v.memberCount=c.value.length,v.conversionCount=c.value.reduce((s,e)=>s+e.conversionCount,0),v.totalCommission=c.value.reduce((s,e)=>s+e.commission,0)},Q=s=>{k.value=s},Y=s=>{D.value=s,k.value=1},G=()=>{B()},J=()=>{m.username="",m.email="",m.phone="",g.value=!0},K=()=>{z.value.validate(async s=>{if(s){T.value=!0;try{await new Promise(e=>setTimeout(e,1e3)),b.success("添加成员功能开发中..."),g.value=!1}catch(e){console.error("添加成员失败:",e),b.error("添加成员失败，请稍后重试")}finally{T.value=!1}}})},O=s=>{i.value=s,x.value=!0},W=s=>{de.confirm(`确定要将 ${s.username} 从团队中移除吗？`,"移除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{f.value=!0;try{await new Promise(e=>setTimeout(e,1e3)),b.success("移除成员功能开发中...")}catch(e){console.error("移除成员失败:",e),b.error("移除成员失败，请稍后重试")}finally{f.value=!1}}).catch(()=>{})};return ne(()=>{B()}),(s,e)=>{const _=r("el-button"),L=r("el-button-group"),F=r("el-card"),w=r("el-input"),X=r("el-skeleton"),p=r("el-table-column"),N=r("el-tag"),Z=r("el-table"),ee=r("el-pagination"),M=r("el-form-item"),te=r("el-form"),R=r("el-dialog"),se=ue("loading");return h(),S("div",pe,[a(me),t("div",ve,[t("div",_e,[e[9]||(e[9]=t("h2",{class:"page-title"},"团队管理",-1)),t("div",fe,[a(L,null,{default:l(()=>[a(_,{type:"primary",onClick:G},{default:l(()=>e[7]||(e[7]=[t("i",{class:"el-icon-refresh"},null,-1),u(" 刷新数据 ")])),_:1}),a(_,{type:"success",onClick:J},{default:l(()=>e[8]||(e[8]=[t("i",{class:"el-icon-plus"},null,-1),u(" 添加成员 ")])),_:1})]),_:1})])]),a(F,{class:"stats-card"},{header:l(()=>e[10]||(e[10]=[t("div",{class:"card-header"},[t("span",null,[t("i",{class:"el-icon-data-analysis"}),u(" 团队概览")])],-1)])),default:l(()=>[t("div",ge,[t("div",be,[e[12]||(e[12]=t("div",{class:"stat-icon"},[t("i",{class:"el-icon-s-custom"})],-1)),t("div",he,[t("div",ye,n(v.memberCount),1),e[11]||(e[11]=t("div",{class:"stat-label"},"团队成员",-1))])]),e[17]||(e[17]=t("div",{class:"stat-divider"},null,-1)),t("div",Ce,[e[14]||(e[14]=t("div",{class:"stat-icon"},[t("i",{class:"el-icon-s-data"})],-1)),t("div",we,[t("div",Te,n(v.conversionCount),1),e[13]||(e[13]=t("div",{class:"stat-label"},"总转化数",-1))])]),e[18]||(e[18]=t("div",{class:"stat-divider"},null,-1)),t("div",ke,[e[16]||(e[16]=t("div",{class:"stat-icon"},[t("i",{class:"el-icon-money"})],-1)),t("div",xe,[t("div",Ve,"¥"+n(V(v.totalCommission)),1),e[15]||(e[15]=t("div",{class:"stat-label"},"团队佣金",-1))])])])]),_:1}),a(F,{class:"team-table-card"},{header:l(()=>[t("div",Me,[e[19]||(e[19]=t("span",null,[t("i",{class:"el-icon-user"}),u(" 团队成员")],-1)),t("div",Se,[a(w,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=o=>C.value=o),placeholder:"搜索成员...","prefix-icon":"el-icon-search",clearable:"",class:"search-input"},null,8,["modelValue"])])])]),default:l(()=>[y.value?(h(),S("div",De,[a(X,{rows:5,animated:""})])):ie((h(),E(Z,{key:1,data:q.value,style:{width:"100%"},border:"",stripe:""},{default:l(()=>[a(p,{prop:"id",label:"ID",width:"80",align:"center"}),a(p,{prop:"username",label:"用户名",width:"120"}),a(p,{prop:"joinTime",label:"加入时间",width:"180"},{default:l(o=>[u(n(j(o.row.joinTime)),1)]),_:1}),a(p,{prop:"conversionCount",label:"转化数量",width:"100",align:"center",sortable:""}),a(p,{prop:"commission",label:"佣金金额",width:"120",align:"right",sortable:""},{default:l(o=>[t("span",ze,"¥"+n(V(o.row.commission)),1)]),_:1}),a(p,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(o=>[a(N,{type:$(o.row.status)},{default:l(()=>[u(n(U(o.row.status)),1)]),_:2},1032,["type"])]),_:1}),a(p,{label:"操作",align:"center"},{default:l(o=>[a(L,null,{default:l(()=>[a(_,{type:"primary",size:"small",onClick:ae=>O(o.row),icon:"el-icon-view"},{default:l(()=>e[20]||(e[20]=[u("查看")])),_:2},1032,["onClick"]),a(_,{type:"danger",size:"small",onClick:ae=>W(o.row),icon:"el-icon-delete"},{default:l(()=>e[21]||(e[21]=[u("移除")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[se,f.value]]),t("div",je,[!y.value&&c.value.length>0?(h(),E(ee,{key:0,onSizeChange:Y,onCurrentChange:Q,"current-page":k.value,"page-sizes":[10,20,50,100],"page-size":D.value,layout:"total, sizes, prev, pager, next, jumper",total:c.value.length},null,8,["current-page","page-size","total"])):P("",!0)])]),_:1})]),a(R,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=o=>g.value=o),title:"添加团队成员",width:"500px","close-on-click-modal":!1},{footer:l(()=>[t("span",$e,[a(_,{onClick:e[4]||(e[4]=o=>g.value=!1)},{default:l(()=>e[22]||(e[22]=[u("取消")])),_:1}),a(_,{type:"primary",onClick:K,loading:T.value},{default:l(()=>e[23]||(e[23]=[u(" 确认添加 ")])),_:1},8,["loading"])])]),default:l(()=>[a(te,{ref_key:"addMemberFormRef",ref:z,model:m,rules:I,"label-width":"100px"},{default:l(()=>[a(M,{label:"用户名",prop:"username"},{default:l(()=>[a(w,{modelValue:m.username,"onUpdate:modelValue":e[1]||(e[1]=o=>m.username=o),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),a(M,{label:"邮箱",prop:"email"},{default:l(()=>[a(w,{modelValue:m.email,"onUpdate:modelValue":e[2]||(e[2]=o=>m.email=o),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),a(M,{label:"手机号",prop:"phone"},{default:l(()=>[a(w,{modelValue:m.phone,"onUpdate:modelValue":e[3]||(e[3]=o=>m.phone=o),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(R,{modelValue:x.value,"onUpdate:modelValue":e[6]||(e[6]=o=>x.value=o),title:"成员详情",width:"600px"},{default:l(()=>[i.value?(h(),S("div",Ue,[t("div",Be,[t("div",Le,n(i.value.username.charAt(0).toUpperCase()),1),t("div",Fe,[t("h3",Ne,n(i.value.username),1),t("p",Re,"ID: "+n(i.value.id),1),t("p",Ae,[a(N,{type:$(i.value.status)},{default:l(()=>[u(n(U(i.value.status)),1)]),_:1},8,["type"])])])]),t("div",Ee,[e[27]||(e[27]=t("h4",{class:"detail-title"},"基本信息",-1)),t("div",Pe,[e[24]||(e[24]=t("span",{class:"detail-label"},"加入时间:",-1)),t("span",Ie,n(j(i.value.joinTime)),1)]),t("div",qe,[e[25]||(e[25]=t("span",{class:"detail-label"},"联系方式:",-1)),t("span",He,n(i.value.phone||"未设置"),1)]),t("div",Qe,[e[26]||(e[26]=t("span",{class:"detail-label"},"邮箱地址:",-1)),t("span",Ye,n(i.value.email||"未设置"),1)])]),t("div",Ge,[e[31]||(e[31]=t("h4",{class:"detail-title"},"业绩统计",-1)),t("div",Je,[t("div",Ke,[t("div",Oe,n(i.value.conversionCount),1),e[28]||(e[28]=t("div",{class:"performance-label"},"转化数量",-1))]),t("div",We,[t("div",Xe,"¥"+n(V(i.value.commission)),1),e[29]||(e[29]=t("div",{class:"performance-label"},"佣金金额",-1))]),t("div",Ze,[t("div",et,n(i.value.rank||"暂无"),1),e[30]||(e[30]=t("div",{class:"performance-label"},"团队排名",-1))])])])])):P("",!0)]),_:1},8,["modelValue"])])}}},nt=ce(tt,[["__scopeId","data-v-779c6c34"]]);export{nt as default};
