import{u as V,r as g,a as y,o as U,c as k,b as l,d as s,w as a,e as x,f as t,g as S,h as f,t as I,i as L}from"./index-nCsIEKc5.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const h={class:"login-container"},B={class:"login-box"},C={class:"login-options"},F={__name:"Login",setup(N){L();const u=V(),i=g(!1),o=y({username:"",password:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}]},m=g(null),c=async()=>{if(!u.isLoading){if(!m.value){console.error("登录表单引用不存在");return}m.value.validate(async r=>{if(!r)return;i.value?localStorage.setItem("rememberedUsername",o.username):localStorage.removeItem("rememberedUsername"),await u.loginUser(o.username,o.password)&&u.navigateToHomePage()})}};return U(()=>{const r=localStorage.getItem("rememberedUsername");r&&(o.username=r,i.value=!0)}),(r,e)=>{const p=t("el-input"),d=t("el-form-item"),v=t("el-checkbox"),b=t("el-button"),w=t("el-form");return S(),k("div",h,[l("div",B,[e[5]||(e[5]=l("div",{class:"login-header"},[l("div",{class:"logo"},"营销推广管理系统"),l("div",{class:"subtitle"},"欢迎登录")],-1)),s(w,{ref_key:"loginFormRef",ref:m,model:o,rules:_,class:"login-form",onKeyup:x(c,["enter"])},{default:a(()=>[s(d,{prop:"username"},{default:a(()=>[s(p,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=n=>o.username=n),placeholder:"请输入用户名","prefix-icon":"el-icon-user",clearable:"",autofocus:""},null,8,["modelValue"])]),_:1}),s(d,{prop:"password"},{default:a(()=>[s(p,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=n=>o.password=n),type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue"])]),_:1}),l("div",C,[s(v,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=n=>i.value=n)},{default:a(()=>e[3]||(e[3]=[f("记住我")])),_:1},8,["modelValue"]),e[4]||(e[4]=l("a",{href:"#",class:"forget-link"},"忘记密码?",-1))]),s(d,null,{default:a(()=>[s(b,{loading:r.loading,type:"primary",class:"login-button",onClick:c},{default:a(()=>[f(I(r.loading?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},M=R(F,[["__scopeId","data-v-73356482"]]);export{M as default};
